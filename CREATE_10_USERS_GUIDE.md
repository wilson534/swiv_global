# 🎯 创建10个不同测试用户指南

## ✨ 新功能

现在匹配页面会从 Supabase 加载真实用户数据，不再是硬编码的3个重复用户！

### 🎨 新特性

- ✅ **10个不同的虚拟角色**（每个都有独特的特点）
- ✅ **从 Supabase 动态加载**（不再是硬编码）
- ✅ **自动过滤已匹配用户**（不会重复显示）
- ✅ **加载状态显示**（更好的用户体验）
- ✅ **空状态处理**（全部看完后可重新加载）

---

## 🚀 快速开始

### 步骤 1: 执行 SQL 创建10个用户

打开 Supabase SQL Editor：
```
https://supabase.com/dashboard/project/qjvexoyuqsvowkqwlyci/sql/new
```

复制并执行 `docs/create_10_users.sql` 的内容：

```sql
-- 1. 创建11个用户（包括您的测试账号）
-- 2. 每个用户有不同的投资风格、关键词和描述
-- 3. 信誉分从76-96不等
```

---

## 👥 10个虚拟角色介绍

| 用户名 | 投资风格 | 信誉分 | 关键词 | 特点 |
|-------|---------|--------|--------|------|
| **Alice** | 🚀 激进型 | 92 | Meme币, 短线交易, GameFi | 热衷于 Meme 币和 GameFi |
| **Bob** | ⚖️ 平衡型 | 88 | Layer2, DeFi, 流动性挖矿 | 专注于 Layer2 和 DeFi |
| **Carol** | 🛡️ 保守型 | 78 | 稳定币, ETF, 定投 | 偏好稳定币和定投 |
| **David** | 🚀 激进型 | 85 | 链游, 元宇宙, Web3 | 链游玩家和元宇宙爱好者 |
| **Emma** | ⚖️ 平衡型 | 94 | NFT艺术, 收藏品, DAO | NFT 艺术收藏家 |
| **Frank** | 🛡️ 保守型 | 72 | 质押, 储蓄, 长期持有 | 长期持有者，稳定收益 |
| **Grace** | 🚀 激进型 | 89 | 合约交易, 杠杆, 期权 | 专业交易员，擅长合约 |
| **Henry** | ⚖️ 平衡型 | 81 | 价值投资, 基本面, 蓝筹币 | 价值投资者，关注基本面 |
| **Iris** | 🛡️ 保守型 | 96 | 国债, 低风险, 保本 | 极度保守，注重本金安全 |
| **Jack** | 🚀 激进型 | 76 | 新币, IDO, 早期投资 | 早期投资者，参与 IDO |

---

## 🎮 使用流程

### 1. 执行 SQL

```sql
-- 在 Supabase SQL Editor 中执行
-- 复制 docs/create_10_users.sql 的全部内容
```

执行后会看到验证结果，显示每个用户的详细信息。

### 2. 重新加载应用

- 手机摇一摇
- 点击 "Reload"

### 3. 进入匹配页面

- 点击底部 "💞 匹配" 标签
- 看到加载动画
- 加载完成后显示第一个候选用户

### 4. 开始滑动

- ❤️ 右滑喜欢 → 添加到聊天
- 👈 左滑跳过 → 继续下一个
- 🔄 全部看完 → 点击"重新加载"

---

## 🔧 功能详解

### 动态加载

```typescript
// 从 Supabase 加载候选用户
const candidates = await getCandidates(walletAddress, 20);

// 自动过滤：
// 1. 排除自己
// 2. 排除已匹配的用户
// 3. 最多返回20个
```

### 智能过滤

- ✅ 不会显示您自己
- ✅ 不会显示已经匹配的用户
- ✅ 右滑后该用户不再出现
- ✅ 看完所有用户后可重新加载

### 加载状态

```
加载中 → 显示动画
有用户 → 显示卡片
没用户 → 显示空状态 + 重新加载按钮
看完了 → 显示提示 + 重新加载按钮
```

---

## 📊 数据结构

每个用户包含：

```typescript
{
  id: string                    // 用户ID
  walletAddress: string         // 钱包地址
  riskType: 'Conservative' | 'Balanced' | 'Aggressive'
  keywords: string[]            // 投资关键词
  description: string           // 详细描述
  trustScore: number            // 信誉分 (0-100)
  matchScore: number            // 匹配度 (60-100，随机)
}
```

---

## 🎨 用户体验改进

### 之前
- ❌ 硬编码3个用户
- ❌ 无限循环同样的用户
- ❌ 没有加载状态
- ❌ 没有空状态处理

### 现在
- ✅ 从数据库动态加载
- ✅ 10个不同的用户
- ✅ 自动过滤已匹配
- ✅ 加载状态动画
- ✅ 空状态提示
- ✅ 重新加载功能

---

## 🧪 测试场景

### 场景 1: 第一次使用

1. 执行 SQL 创建10个用户
2. 打开匹配页面
3. 看到"加载候选用户中..."
4. 1-2秒后显示第一个用户
5. 开始滑动

### 场景 2: 右滑喜欢

1. 右滑 Alice
2. 看到"添加成功！💞"
3. Alice 从候选列表中移除
4. 下次不会再看到 Alice

### 场景 3: 看完所有用户

1. 滑动到第10个用户
2. 右滑或左滑
3. 看到"全部看完了！"
4. 点击"🔄 重新加载"
5. 重新显示未匹配的用户

### 场景 4: 没有用户

1. 如果没执行 SQL
2. 看到"暂无候选用户"
3. 提示"请在 Supabase 中创建测试用户"
4. 点击"🔄 重新加载"

---

## 📝 SQL 执行清单

确保执行了以下SQL（按顺序）：

- [ ] `docs/supabase_schema.sql` - 数据库表结构
- [ ] RLS 策略修复 SQL - 允许插入和查询
- [ ] `docs/create_10_users.sql` - 创建10个测试用户

---

## ✅ 验证成功

执行完 SQL 后，在 Supabase SQL Editor 中运行：

```sql
SELECT COUNT(*) as total FROM profiles;
-- 应该返回 11 (您的账号 + 10个测试用户)

SELECT COUNT(*) as total FROM personas;
-- 应该返回 11

SELECT risk_type, COUNT(*) 
FROM personas 
GROUP BY risk_type;
-- 应该看到各种投资风格的分布
```

---

## 🎉 完成！

现在您有：
- ✅ 11个测试用户
- ✅ 10个不同的候选者
- ✅ 动态加载系统
- ✅ 智能过滤机制
- ✅ 完整的用户体验

**开始享受您的匹配之旅吧！** 🚀

---

## 🔧 故障排查

### 问题：看不到任何用户

**解决：**
1. 检查是否执行了 `create_10_users.sql`
2. 在 Supabase 中查询：`SELECT * FROM profiles`
3. 确认有11条记录
4. 重新加载应用

### 问题：总是显示同样的用户

**解决：**
1. 检查 RLS 策略是否正确
2. 查看控制台错误日志
3. 确认 Supabase 连接正常

### 问题：右滑后用户还在

**解决：**
1. 检查 match 是否创建成功
2. 查询：`SELECT * FROM matches`
3. 确认 RLS 策略允许插入

---

**文档位置：** `CREATE_10_USERS_GUIDE.md`
**SQL 文件：** `docs/create_10_users.sql`



